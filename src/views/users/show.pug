extends ../layout.pug

block content
  style.
    th, td {
      padding: 2px 4px;
    }

    tr {
      border: 1px solid;
    }

    th, tr > td {
      border-right: 1px solid;
    }

  if !user
    div= `${name} does not exist.`
  else
    h1(class="text-2xl mb-2")= `Profile for ${user.username}`
    div(class="flex mb-2")
      if user.twitter
        a(href=`https://twitter.com/${user.twitter}` class="underline text-blue-500")= `@${user.twitter}`
      if flag
        div(class="mx-2")= `${flag}`
      //- if canEdit
      //-   a(class="mx-2" href=`/users/${name}/edit`) Edit

    each letter of letters
      a(href=`#${letter} ` class="pr-1")= letter

    table
      thead
        tr
          th(class="song-title") Song
          if canEdit
            th Edit
          th Grade
          th Marv
          th Perf
          th Great
          th Good
          th Miss
          th Boo

      tbody
        each score of scores
          tr(
            class=`${score.grade === "AAA" ? "bg-blue-200" : score.grade === "AA" ? "bg-yellow-200" : score.grade === "A" ? "bg-green-300" : ""}`
            id=score.anchor
          )
            td(class="song-title")
              =score.song.name
              if score.grade == "AA"
                =` (${score.great}g)`
            if canEdit
              td
                if score.id
                  a(href=`/submit_scores/${score.id}/edit`)= "Edit"
                else
                  a(href=`/submit_scores?song_id=${score.song.id}`)= "Edit"
            td= score.grade
            td= score.marvelous
            td= score.perfect
            td= score.great
            td= score.good
            td= score.miss
            td= score.boo
